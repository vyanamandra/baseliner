{% if CONSUL_VM_EC2_TLS_ENABLED|bool %}
tls {
  defaults {
    ca_file = "/opt/consul/tls/consul-agent-ca.pem"
    cert_file = "/opt/consul/tls/{{ DC_NAME }}-server-consul-0.pem"
    key_file = "/opt/consul/tls/{{ DC_NAME }}-server-consul-0-key.pem"
    verify_server_hostname = true
    verify_incoming = true
    verify_outgoing = true
  }

  https {
    verify_incoming = false
  }
}
{% endif %}